<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trend Hub - Your Gateway to Global Trends</title>
    <meta name="description" content="Discover what matters to people worldwide. Explore trending topics in finance, health, tech, entertainment, and more.">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4XL141Z539"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-4XL141Z539');
    </script>
    
    <!-- Statcounter (대안) -->
    <!--
    <script type="text/javascript">
        var sc_project=YOUR_PROJECT_ID;
        var sc_invisible=1;
        var sc_security="YOUR_SECURITY_CODE";
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript><div class="statcounter"><a title="web analytics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/YOUR_PROJECT_ID/0/YOUR_SECURITY_CODE/1/" alt="web analytics" referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
    -->
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="sticky-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Trend Hub</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Section -->
    <section class="main-content-section">
        <div class="container">
            <div class="content-header">
                <h1 class="main-title">Discover What's <span class="highlight">Trending Worldwide</span></h1>
                <p class="main-subtitle">Explore the most talked-about topics and stay ahead of the curve with insights that matter to people around the globe</p>
                

            </div>
            
            <!-- Topics Grid -->
            <div class="topics-section">
                <div class="topics-grid" id="topicsGrid">
                    <!-- Topics will be dynamically rendered here -->
                </div>
            </div>
        </div>
    </section>

    <!-- 방문자 카운터 섹션 -->
    <section class="visitor-counter-section">
        <div class="container">
            <div class="main-visitor-counter">
                <div class="counter-item">
                    <span class="counter-icon">👥</span>
                    <span class="counter-label">Total Visitors</span>
                    <span class="counter-number" id="mainVisitorCount">Loading...</span>
                </div>
                <div class="counter-item">
                    <span class="counter-icon">📊</span>
                    <span class="counter-label">Today's Visitors</span>
                    <span class="counter-number" id="todayVisitorCount">Loading...</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <h3>Trend Hub</h3>
                <p>Your gateway to understanding what matters to people worldwide</p>
                <!-- 방문자 카운터 -->
                <div class="visitor-counter">
                    <span>👥 Visitors: <span id="visitorCount">Loading...</span></span>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Trend Hub. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    
    <!-- Google Analytics 방문자 카운터 스크립트 -->
    <script>
        // Google Analytics 방문자 카운터 관리
        class GoogleAnalyticsCounter {
            constructor() {
                this.measurementId = 'G-4XL141Z539';
                this.init();
            }
            
            init() {
                this.updateDisplay();
                // 5분마다 데이터 업데이트
                setInterval(() => this.updateDisplay(), 5 * 60 * 1000);
            }
            
            async updateDisplay() {
                try {
                    // Google Analytics 4 데이터 가져오기
                    const data = await this.getAnalyticsData();
                    
                    if (data) {
                        // 메인 카운터 업데이트
                        if (document.getElementById('mainVisitorCount')) {
                            document.getElementById('mainVisitorCount').textContent = data.totalUsers.toLocaleString();
                        }
                        
                        if (document.getElementById('todayVisitorCount')) {
                            document.getElementById('todayVisitorCount').textContent = data.todayUsers.toLocaleString();
                        }
                        
                        // footer 카운터도 업데이트
                        if (document.getElementById('visitorCount')) {
                            document.getElementById('visitorCount').textContent = data.totalUsers.toLocaleString();
                        }
                    }
                } catch (error) {
                    console.log('Analytics data not available yet, using fallback counter');
                    this.useFallbackCounter();
                }
            }
            
            async getAnalyticsData() {
                // Google Analytics 4에서 데이터 가져오기 시도
                if (typeof gtag !== 'undefined') {
                    return new Promise((resolve) => {
                        // Google Analytics 4 이벤트 기반 데이터 수집
                        gtag('event', 'page_view', {
                            'event_callback': () => {
                                // 실제 데이터는 Google Analytics 대시보드에서 확인
                                // 여기서는 기본값 반환
                                resolve({
                                    totalUsers: this.getStoredCount('totalUsers'),
                                    todayUsers: this.getStoredCount('todayUsers')
                                });
                            }
                        });
                    });
                }
                return null;
            }
            
            getStoredCount(key) {
                const stored = localStorage.getItem(`ga_${key}`);
                return stored ? parseInt(stored) : 0;
            }
            
            useFallbackCounter() {
                // Google Analytics 데이터가 없을 때 기본 카운터 사용
                let totalCount = this.getStoredCount('totalUsers') || 0;
                let todayCount = this.getStoredCount('todayUsers') || 0;
                
                // 새로운 방문자면 카운트 증가
                if (!localStorage.getItem('ga_session')) {
                    totalCount++;
                    todayCount++;
                    localStorage.setItem('ga_totalUsers', totalCount.toString());
                    localStorage.setItem('ga_todayUsers', todayCount.toString());
                    localStorage.setItem('ga_session', Date.now().toString());
                    
                    // 날짜 변경 시 오늘 카운트 리셋
                    const today = new Date().toDateString();
                    if (localStorage.getItem('ga_lastDate') !== today) {
                        localStorage.setItem('ga_todayUsers', '1');
                        localStorage.setItem('ga_lastDate', today);
                        todayCount = 1;
                    }
                }
                
                // 화면 업데이트
                if (document.getElementById('mainVisitorCount')) {
                    document.getElementById('mainVisitorCount').textContent = totalCount.toLocaleString();
                }
                
                if (document.getElementById('todayVisitorCount')) {
                    document.getElementById('todayVisitorCount').textContent = todayCount.toLocaleString();
                }
                
                if (document.getElementById('visitorCount')) {
                    document.getElementById('visitorCount').textContent = totalCount.toLocaleString();
                }
            }
            
            // 카운터 리셋 함수
            resetCounters() {
                localStorage.removeItem('ga_totalUsers');
                localStorage.removeItem('ga_todayUsers');
                localStorage.removeItem('ga_session');
                localStorage.removeItem('ga_lastDate');
                this.updateDisplay();
            }
        }
        
        // 페이지 로드 시 Google Analytics 카운터 초기화
        document.addEventListener('DOMContentLoaded', () => {
            window.gaCounter = new GoogleAnalyticsCounter();
            console.log('Google Analytics Counter initialized. Use gaCounter.resetCounters() to reset.');
        });
    </script>
</body>
</html>
